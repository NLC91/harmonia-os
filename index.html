<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Harmonia OS - Votre Syst√®me de Vie</title>
    <link rel="stylesheet" href="styles.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <meta name="theme-color" content="#6366f1" />
</head>
<body>
    <!-- SVG Gradients -->
    <svg width="0" height="0" style="position: absolute;">
        <defs>
            <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#6366f1;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#8b5cf6;stop-opacity:1" />
            </linearGradient>
        </defs>
    </svg>

    <!-- Dashboard Principal -->
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="logo">Harmonia OS</h1>
                <div class="header-info">
                    <span class="date" id="currentDate"></span>
                    <span class="time" id="currentTime"></span>
                    <button id="openSettingsBtn" class="settings-btn" title="Param√®tres">‚öôÔ∏è</button>
                </div>
            </div>
        </header>

        <!-- Harmony Score -->
        <div class="harmony-score">
            <div class="score-circle">
                <svg viewBox="0 0 200 200">
                    <circle cx="100" cy="100" r="90" class="score-bg"/>
                    <circle cx="100" cy="100" r="90" class="score-fill" id="harmonyCircle"/>
                </svg>
                <div class="score-text">
                    <span class="score-number" id="harmonyScore">0</span>
                    <span class="score-label">Harmonie</span>
                </div>
            </div>
            <p class="score-message" id="scoreMessage">Calculez votre √©quilibre de vie</p>
        </div>

        <!-- Mandala de Vie - 6 Sph√®res -->
        <div class="life-mandala">
            <div class="mandala-container">
                <!-- Les 6 sph√®res seront g√©n√©r√©es dynamiquement -->
                <div id="spheresContainer"></div>
                <!-- Centre du Mandala -->
                <div class="mandala-center">
                    <button class="harmony-btn" id="harmonyBtn">
                        <span>‚ú®</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
            <button class="action-btn" data-action="meditate">
                <span class="action-icon">üßò</span>
                <span>M√©diter</span>
            </button>
            <button class="action-btn" data-action="journal">
                <span class="action-icon">üìù</span>
                <span>Journal</span>
            </button>
            <button class="action-btn" data-action="focus">
                <span class="action-icon">üéØ</span>
                <span>Focus</span>
            </button>
            <button class="action-btn" data-action="review">
                <span class="action-icon">üìä</span>
                <span>Bilan</span>
            </button>
        </div>

        <!-- Today's Focus -->
        <div class="today-focus">
            <div class="focus-header">
                <h2>Focus du Jour</h2>
                <button class="add-task-btn" id="addTaskBtn">+ Ajouter</button>
            </div>
            <div class="focus-items" id="focusItems">
                <!-- Les t√¢ches seront g√©n√©r√©es dynamiquement -->
            </div>
        </div>

        <!-- Insights -->
        <div class="insights">
            <h2>Insights du Jour</h2>
            <div class="insight-cards" id="insightCards">
                <!-- Les insights seront g√©n√©r√©s dynamiquement -->
            </div>
        </div>

        <!-- Analytics Dashboard (minimal) -->
        <div class="analytics-panel" id="analyticsPanel">
            <h2>Analytics</h2>
            <div id="analyticsDashboard"></div>
            <div style="text-align:right; margin-top:8px;">
                <button class="btn-secondary" id="exportEventsBtn">Exporter √©v√©nements</button>
                <button class="btn-secondary" id="clearEventsBtn">Effacer √©v√©nements</button>
            </div>
        </div>

        <!-- Timer de M√©ditation -->
        <div class="meditation-timer" id="meditationTimer" style="display: none;">
            <h3>M√©ditation en cours</h3>
            <div class="timer-display" id="timerDisplay">00:00</div>
            <button class="btn-stop" onclick="stopMeditation()">Arr√™ter</button>
        </div>
    </div>

    <!-- Modal D√©tail Sph√®re -->
    <div class="modal" id="sphereModal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modalContent"></div>
        </div>
    </div>

    <!-- Modal Journal -->
    <div class="modal" id="journalModal">
        <div class="modal-content journal-content">
            <span class="close" onclick="closeJournal()">&times;</span>
            <h2>üìù Journal Personnel</h2>
            <div class="journal-form">
                <label>Comment vous sentez-vous ? (1-10)</label>
                <input type="range" id="moodRange" min="1" max="10" value="7">
                <span id="moodValue">7</span>

                <label>Gratitudes du jour</label>
                <textarea id="gratitudeText" placeholder="Je suis reconnaissant pour..."></textarea>

                <label>R√©flexions</label>
                <textarea id="reflectionText" placeholder="Aujourd'hui, j'ai appris que..."></textarea>

                <button class="btn-primary" onclick="saveJournal()">Sauvegarder</button>
            </div>
        </div>
    </div>

    <!-- Modal d'ajout de t√¢che (remplace prompt) -->
    <div class="modal" id="taskModal" aria-hidden="true">
        <div class="modal-content">
            <span class="close" id="taskModalClose">&times;</span>
            <h2>Nouvelle t√¢che</h2>
            <form id="taskForm">
                <label for="taskText">Que souhaitez-vous accomplir ?</label>
                <input id="taskText" name="taskText" type="text" placeholder="Ex: Marcher 10 minutes" required>

                <label for="taskSphere">Associer une sph√®re (optionnel)</label>
                <select id="taskSphere" name="taskSphere">
                    <option value="">Aucune</option>
                </select>

                <label for="taskWhen">Quand ? (optionnel)</label>
                <input id="taskWhen" name="taskWhen" type="datetime-local">

                <div style="display:flex; gap:8px; margin-top:12px;">
                    <button type="submit" class="btn-primary">Ajouter</button>
                    <button type="button" class="btn-secondary" id="taskCancelBtn">Annuler</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Settings (IA opt-in & API URL) -->
    <div class="modal" id="settingsModal" aria-hidden="true">
        <div class="modal-content">
            <span class="close" id="settingsModalClose">&times;</span>
            <h2>Param√®tres</h2>
            <div class="settings-row">
                <label><input type="checkbox" id="aiEnabledCheckbox"> Activer l'assistant intelligent (IA)</label>
                <p class="muted">L'IA enverra des donn√©es minimales (√©tat des sph√®res) au serveur que vous configurez. Activation explicite requise.</p>
            </div>
            <div class="settings-row">
                <label for="aiApiUrl">URL de l'API IA (ex: https://your-server.example.com/api/ai-suggest)</label>
                <input id="aiApiUrl" type="url" placeholder="https://...">
            </div>
            <div style="margin-top:12px;">
                <button class="btn-primary" id="saveSettingsBtn">Sauvegarder</button>
            </div>
        </div>
    </div>

    <!-- Core services & components (load before main script) -->
    <script src="src/services/storage.js"></script>
    <script src="src/services/notifications.js"></script>
    <script src="src/services/analytics.js"></script>
    <script src="src/services/ai_coach.js"></script>
    <script src="src/components/habits.js"></script>
    <script src="src/components/onboarding.js"></script>
    <script src="src/components/analytics.js"></script>

    <!-- Main app script -->
    <script src="script.js"></script>
</body>
</html>
